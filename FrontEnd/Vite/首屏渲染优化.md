Vite é¦–å±ä¼˜åŒ– = **â€œè®©æµè§ˆå™¨å°‘æ‹¿ã€æ—©æ‹¿ã€å¹¶è¡Œæ‹¿æœ€å…³é”®çš„èµ„æºâ€**ã€‚ä¸‹é¢æŠŠç¤¾åŒºå®æˆ˜ï¼ˆ10 s â†’ 1.5 sï¼‰ å’Œå®˜æ–¹æœ€ä½³å®è·µæµ“ç¼©æˆä¸€ä»½ã€Œæ‹¿æ¥å³ç”¨ã€çš„ Checklistï¼ŒæŒ‰ ROI ä»é«˜åˆ°ä½æ’åºï¼Œå¹¶ç»™å‡ºå¯å¤åˆ¶ç²˜è´´çš„ä»£ç ç‰‡æ®µã€‚

---
### âœ… 1. å…ˆå®šä½ï¼šåˆ°åº•æ…¢åœ¨å“ª

| å·¥å…·                           | å‘½ä»¤ / ç”¨æ³•                                                                                 | çœ‹å•¥            |
| :--------------------------- | :-------------------------------------------------------------------------------------- | :------------ |
| **rollup-plugin-visualizer** | `pnpm i -D rollup-plugin-visualizer`Â å¹¶åœ¨Â `vite.config.ts`Â é‡ŒåŠ Â `visualizer({ open:true })` | æ‰¾å‡ºèƒ– chunk     |
| **Chrome Coverage**          | F12 â†’ Ctrl+Shift+P â†’ Show Coverage â†’ åˆ·æ–°                                                 | çº¢è‰² = é¦–å±ç”¨ä¸åˆ°çš„ä»£ç  |

---
### âœ… 2. èµ„æºä½“ç§¯ç˜¦èº«ï¼ˆä¸€æ¬¡æ€§ç æ‰ 80% éé¦–å±ä»£ç ï¼‰


```ts
// vite.config.ts
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        // 1ï¸âƒ£ ç¬¬ä¸‰æ–¹åº“å•ç‹¬ chunkï¼Œæµè§ˆå™¨å¯é•¿æœŸç¼“å­˜
        manualChunks(id) {
          if (id.includes('node_modules')) return 'vendor';
        }
      }
    },
    // 2ï¸âƒ£ å¯ç”¨ CSS ä»£ç åˆ†å‰²
    cssCodeSplit: true
  },
  plugins: [
    // 3ï¸âƒ£ ç»„ä»¶ & å›¾æ ‡æŒ‰éœ€
    Components({ resolvers: [AntDesignVueResolver()] }),
    // 4ï¸âƒ£ ç”Ÿäº§å‹ç¼© brotli/gzip
    compression({ algorithm: 'brotliCompress' })
  ]
})
```

---
### âœ… 3. å…³é”®æ¸²æŸ“è·¯å¾„ä¼˜åŒ–ï¼ˆé¦–å±åªåŠ è½½ < 200 KBï¼‰

| æ‰‹æ®µ                 | å®æ“ä»£ç                                                       | æ”¶ç›Š            |
| :----------------- | :-------------------------------------------------------- | :------------ |
| **è·¯ç”±çº§æ‡’åŠ è½½**         | `const Home = () => import('@/pages/Home.vue')`           | ä¸»åŒ…ç¬é—´é™ 50%     |
| **å¤§ç»„ä»¶å†æ‹†**          | `const Chart = React.lazy(() => import('./EchartsWrap'))` | å›¾è¡¨ä¸åœ¨é¦–å±å°±ä¸åŠ è½½    |
| **å­—ä½“å»¶è¿Ÿ**           | `@font-face{font-display:swap;}`                          | å…ˆæ¸²æŸ“ç³»ç»Ÿå­—ä½“ï¼Œå†å¼‚æ­¥æ›¿æ¢ |
| **å›¾ç‰‡èµ° CDN + WebP** | `<img loading="lazy" src="https://cdn.xxx.com/a.webp" />` | é¦–å±çœæ‰ 70% å›¾ç‰‡ä½“ç§¯ |

---
### âœ… 4. ç½‘ç»œå±‚åŠ é€Ÿï¼ˆæŠŠã€Œä¸‹è½½ã€è¿™ä¸€æ­¥å‹åˆ° 1 s å†…ï¼‰

1. **HTTP/2 + CDN**ï¼šæŠŠ `dist/assets/**` æ¨åˆ°ä¸ƒç‰›/é˜¿é‡Œ CDNï¼Œå¹¶å¼€ Brotliã€‚
2. **preload / prefetch
    
    ```html
    <link rel="preload" href="/vendor.brotli.js" as="script" crossorigin />
    <link rel="prefetch" href="/admin.chunk.js" as="script" />
    ```
    
3. **ç¼“å­˜ç­–ç•¥**
    
    - æ–‡ä»¶åå¸¦ hash â†’ å¼ºç¼“å­˜ä¸€å¹´
    - `index.html` è®¾ç½® `Cache-Control: no-cache` æ–¹ä¾¿å‘ç‰ˆ

---
### âœ… 5. éª¨æ¶å±è®©â€œæ„ŸçŸ¥æ›´å¿«â€ï¼ˆå¯é€‰ï¼‰

ä½¿ç”¨ [vite-plugin-skeleton](https://github.com/jackieku/vue-skeleton-webpack-plugin) æˆ–è‡ªå·±å†™æ’ä»¶ï¼Œåœ¨ `transformIndexHtml` æŠŠéª¨æ¶ HTML ç›´æ¥æ³¨å…¥ `<div id="app">` å†…ï¼Œé¦–å±ç¬é—´å‡ºç°ã€Œç°å—ã€ã€‚

---
### âœ… 6. å¼€å‘ç¯å¢ƒä¹Ÿå¿«ï¼ˆ10 s â†’ 2 sï¼‰

- **ä¾èµ–é¢„æ„å»ºç¼“å­˜**ï¼š`vite --force` åªåœ¨å‡çº§ä¾èµ–åæ‰§è¡Œä¸€æ¬¡ã€‚
- **æŒ‰éœ€ç¼–è¯‘**ï¼šVite æœ¬èº«å°±æ˜¯è®¿é—®è·¯ç”±æ—¶æ‰ç¼–è¯‘å¯¹åº”æ–‡ä»¶ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚

---
### ğŸ“Š çœŸå®ä¼˜åŒ–ç»“æœï¼ˆç¤¾åŒºæ¡ˆä¾‹ï¼‰

|æŒ‡æ ‡|ä¼˜åŒ–å‰|ä¼˜åŒ–å|
|:--|:--|:--|
|ä¸»åŒ… JS|41 MB|6.7 MB|
|é¦–å± LCP|10.47 s|1.53 s|
|èµ„æºå³°å€¼|5 s|0.9 s|

---

### ä¸€é”®å¯åŠ¨æ¨¡æ¿

```bash
git clone https://github.com/originjs/vite-templates/tree/master/packages/vue3
# å·²é›†æˆ visualizer + compression + auto-import + lazy routes
```

ç…§æŠ„å®Œä¸Šé¢ 6 æ­¥ï¼Œ**é¦–å±åŸºæœ¬éƒ½èƒ½å‹è¿› 2 s ä»¥å†…**ã€‚å¦‚è¿˜æœ‰å…·ä½“ç“¶é¢ˆï¼ˆå¦‚å¤§ JSONã€3D æ¨¡å‹ç­‰ï¼‰ï¼ŒæŠŠ Network é¢æ¿è´´å‡ºæ¥ï¼Œæˆ‘å†å¸®ä½ é’ˆå¯¹æ€§æ‹†è§£ã€‚